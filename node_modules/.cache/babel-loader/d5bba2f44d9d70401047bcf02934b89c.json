{"ast":null,"code":"'use strict';\n\nfunction Via(settings) {\n  //Init view Element\n  var hashtag = getHashTag();\n  this.viewElements = '';\n  this.linkClicked = false;\n  this.views = settings || {};\n\n  if (settings !== undefined) {\n    this.currentState = this.defaultState = settings.defaultView.view;\n\n    if (!!hashtag) {\n      this.currentState = hashtag;\n    }\n\n    this.init(settings);\n  }\n}\n\n;\n\nVia.prototype.init = function (views) {\n  if (!views) {\n    console.error(\"Via Init function views parameter is undefined\");\n  } else if (window.jQuery) {\n    // replaces the existing and adds the new\n    this.views = $.extend(true, this.views, views);\n    this.compile(document.body); // adds via-views attr\n\n    this.watch();\n    this.loadPage();\n    this.watchHashChange();\n  } else {\n    console.error(\"ViaJS Requires jQuery\");\n  }\n};\n\nVia.prototype.compile = function (element) {\n  this.viewElements = $(\"[via-views]\");\n};\n\nVia.prototype.clear = function (element) {\n  this.viewElements.each(function () {\n    $(this).html(\"\");\n  });\n};\n\nVia.prototype.watch = function () {\n  var that = this; //Checking if an a element is clicked\n\n  $(\"body\").delegate(\"a[via-href]\", \"click\", function () {\n    //setting url hashtag\n    window.location.hash = $(this).attr(\"via-href\");\n    var newState = getHashTag();\n\n    if (that.currentState === newState) {\n      return;\n    }\n\n    that.linkClicked = true;\n    var newSettings = that.views[newState];\n\n    if (!!newSettings) {\n      that.currentState = newState;\n    }\n\n    if (!(\"onhashchange\" in window)) {\n      that.loadPage();\n    }\n\n    return false;\n  });\n};\n\nVia.prototype.watchHashChange = function () {\n  var that = this;\n\n  if (!(\"onhashchange\" in window)) {\n    console.warn(\"This browser does not support the hashchange event!\");\n  } else {\n    window.onhashchange = function () {\n      if (!that.linkClicked) {\n        that.currentState = location.hash.substring(1);\n        that.loadPage();\n      } else {\n        that.loadPage();\n      }\n\n      that.linkClicked = false;\n    };\n  }\n};\n\nVia.prototype.loadPage = function () {\n  // this.clear();\n  var settings = this.views[this.currentState];\n\n  if (!settings) {\n    settings = this.views[this.defaultState];\n  }\n\n  settings.forEach(loadPiece);\n};\n\nvar getHashTag = function getHashTag() {\n  return window.location.hash.substring(1);\n};\n\nvar loadPiece = function loadPiece(data) {\n  var element = $(data.selector);\n\n  if (!element.length) {\n    console.warn(\"selector not found:\", data.selector);\n    return;\n  }\n\n  if (!!data.hidden) {\n    element.css(\"display\", \"none\");\n    return;\n  } else {\n    element.css(\"display\", \"block\");\n\n    if (!data.templateUrl) {\n      return;\n    }\n  }\n\n  if (element.attr(\"content\") === data.templateUrl) {\n    console.log(\"content already preasent:\", data.templateUrl);\n    data.callback && data.callback();\n    data.components && data.components.forEach(loadPiece);\n    return;\n  }\n\n  element.attr(\"content\", data.templateUrl);\n  element.load(data.templateUrl, \"\", function () {\n    data.callback && data.callback();\n    data.components && data.components.forEach(loadPiece);\n  });\n};","map":{"version":3,"sources":["C:/Users/Kaprisylenka/Desktop/TestRubyApp/prettychecklist/app/javascript/packs/app.js"],"names":["Via","settings","hashtag","getHashTag","viewElements","linkClicked","views","undefined","currentState","defaultState","defaultView","view","init","prototype","console","error","window","jQuery","$","extend","compile","document","body","watch","loadPage","watchHashChange","element","clear","each","html","that","delegate","location","hash","attr","newState","newSettings","warn","onhashchange","substring","forEach","loadPiece","data","selector","length","hidden","css","templateUrl","log","callback","components","load"],"mappings":"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","sourcesContent":["'use strict';\r\n\r\nfunction Via(settings) {\r\n    //Init view Element\r\n    var hashtag = getHashTag();\r\n    this.viewElements = '';\r\n    this.linkClicked = false;\r\n    this.views = settings || {};\r\n    if (settings!==undefined){\r\n        this.currentState = this.defaultState = settings.defaultView.view;\r\n        if (!!hashtag){\r\n            this.currentState = hashtag;\r\n        }\r\n        this.init(settings);\r\n    }\r\n};\r\n\r\nVia.prototype.init = function(views) {\r\n    if (!views) {\r\n        console.error(\"Via Init function views parameter is undefined\");\r\n    }\r\n    else if (window.jQuery) {\r\n        // replaces the existing and adds the new\r\n        this.views = $.extend(true, this.views, views);\r\n        this.compile(document.body); // adds via-views attr\r\n        this.watch();\r\n        this.loadPage();\r\n        this.watchHashChange();\r\n    }\r\n    else {\r\n        console.error(\"ViaJS Requires jQuery\");\r\n    }\r\n};\r\n\r\nVia.prototype.compile = function(element) {\r\n    this.viewElements = $(\"[via-views]\");\r\n};\r\n\r\nVia.prototype.clear = function(element) {\r\n    this.viewElements.each(function(){\r\n        $(this).html(\"\");\r\n    });\r\n};\r\n\r\nVia.prototype.watch = function() {\r\n    var that = this;\r\n\r\n    //Checking if an a element is clicked\r\n    $(\"body\").delegate(\"a[via-href]\", \"click\", function() {\r\n        //setting url hashtag\r\n        window.location.hash = $(this).attr(\"via-href\");\r\n        var newState = getHashTag();\r\n        if (that.currentState === newState){\r\n            return;\r\n        }\r\n\r\n        that.linkClicked = true;\r\n\r\n        var newSettings = that.views[newState];\r\n        if (!!newSettings){\r\n            that.currentState = newState;\r\n        }\r\n\r\n        if (!(\"onhashchange\" in window)) {\r\n            that.loadPage();\r\n        }\r\n\r\n        return false;\r\n    });\r\n};\r\n\r\nVia.prototype.watchHashChange = function(){\r\n  var that = this;\r\n\r\n  if (!(\"onhashchange\" in window)) {\r\n    console.warn(\"This browser does not support the hashchange event!\")\r\n  }\r\n  else {\r\n    window.onhashchange = function(){\r\n      if(!that.linkClicked){\r\n        that.currentState = location.hash.substring(1);\r\n        that.loadPage();\r\n      }\r\n      else{\r\n        that.loadPage();\r\n      }\r\n      that.linkClicked = false;\r\n    }\r\n  }\r\n\r\n}\r\n\r\n\r\nVia.prototype.loadPage = function() {\r\n    // this.clear();\r\n    var settings = this.views[this.currentState];\r\n    if (!settings){\r\n        settings = this.views[this.defaultState];\r\n    }\r\n    settings.forEach(loadPiece);\r\n};\r\n\r\nvar getHashTag = function(){\r\n    return window.location.hash.substring(1);\r\n};\r\nvar loadPiece = function(data) {\r\n    var element = $(data.selector)\r\n    if (!element.length) {\r\n        console.warn(\"selector not found:\", data.selector);\r\n        return;\r\n    }\r\n    if (!!data.hidden){\r\n        element.css(\"display\", \"none\");\r\n        return;\r\n    } else {\r\n        element.css(\"display\", \"block\");\r\n        if (!data.templateUrl){\r\n            return;\r\n        }\r\n    }\r\n\r\n    if (element.attr(\"content\") === data.templateUrl){\r\n        console.log(\"content already preasent:\",data.templateUrl);\r\n        data.callback && data.callback();\r\n        data.components && data.components.forEach(loadPiece);\r\n        return;\r\n    }\r\n    element.attr(\"content\",data.templateUrl);\r\n    element.load(data.templateUrl, \"\", function(){\r\n        data.callback && data.callback();\r\n        data.components && data.components.forEach(loadPiece);\r\n    });\r\n};"]},"metadata":{},"sourceType":"module"}